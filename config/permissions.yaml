# Permission matrix for Icebreaker MCP Server
# Defines which roles can access which tools and operations

# Role-based access control
roles:
  # Read-only role for data analysts - Enhanced with full discovery access
  analyst:
    allowed_tools:
      - "*"
      - list_databases
      - list_schemas
      - list_tables
      - list_warehouses
      - list_users
      - describe_table
      - get_object_ddl
      - search_objects
      - execute_read_query
      - explain_access
    allowed_operations:
      - "*"
      - READ

  # DataOps role for operational tasks - Full operational access
  dataops:
    allowed_tools:
      - "*"
    allowed_operations:
      - "*"
      - READ
      - WAREHOUSE_MANAGE
      - USER_MANAGE_BASIC
      - USER_MANAGE_ADMIN
      - ADMIN
      - WRITE

  # Admin role for full administrative access - Complete access
  admin:
    allowed_tools:
      - "*"
    allowed_operations:
      - "*"

# Tool-specific permissions - More permissive defaults
tool_permissions:
  suspend_warehouse:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false

  resume_warehouse:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false

  resize_warehouse:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false

  create_user:
    required_roles: ["dataops", "admin"]  # More accessible
    safety_checks: true
    requires_confirmation: false

  manage_roles:
    required_roles: ["dataops", "admin"]  # More accessible
    safety_checks: true
    requires_confirmation: false

  drop_table:
    required_roles: ["admin"]
    safety_checks: true
    requires_approval: false
    requires_confirmation: true
    blocked_in_safe_mode: false  # Allow in safe mode with confirmation

  create_table:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false

  load_table_from_stage:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false

  execute_read_query:
    required_roles: ["*"]  # Available to all roles
    safety_checks: true
    requires_confirmation: false