# Service specifications for Icebreaker MCP Server
# Based on official Snowflake MCP format with Icebreaker extensions

# Tier 1: Discovery Services (Phase 1)
discovery:
  enabled: true
  tools:
    - list_databases
    - list_schemas
    - list_tables
    - describe_table
    - get_object_ddl
    - search_objects

# Tier 2: Operational Services (Phase 2)
operational:
  enabled: false  # Enable in Phase 2
  safety_checks: strict
  tools:
    - suspend_warehouse
    - resume_warehouse
    - resize_warehouse
    - create_user
    - manage_roles

# Tier 3: Engineering Services (Phase 3)
engineering:
  enabled: false  # Enable in Phase 3
  tools:
    - load_table_from_stage
    - create_clone
    - refresh_dynamic_table

# Tier 4: Intelligence Services (Phase 4)
intelligence:
  enabled: false  # Enable in Phase 4
  tools:
    - diagnose_slow_query
    - suggest_clustering_keys
    - analyze_cost_drivers
    - explain_access

# SQL permissions
sql_statement_permissions:
  # Read permissions (Tier 1)
  allowed:
    - SELECT
    - SHOW
    - DESCRIBE
    - GET_DDL
    - USE
    - WITH

  # Administrative permissions (Tier 2+)
  administrative_allowed:
    - ALTER WAREHOUSE
    - CREATE USER
    - ALTER USER
    - GRANT ROLE
    - SYSTEM$ABORT_QUERY

  # Always disallowed
  disallowed:
    - DROP DATABASE
    - DROP SCHEMA
    - DROP WAREHOUSE
    - UNSUPPORTED